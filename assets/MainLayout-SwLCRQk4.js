import{c as R,g as q,i as j,e as L,l as k,a as f,h as m,b as A,p as B,f as N,s as V,w as _,j as K,k as U,o as G,m as I,n as J,q as X,r as Y,t as h,u as P,v as Z,x as C,y as ee,z as te,A as oe,B as ne,C as le,D as ie,E as D,F as y,G as T}from"./index-BFxpJziR.js";import{Q as E}from"./QResizeObserver-vInlWzzC.js";import{u as ae}from"./use-quasar-Z9-lQEjY.js";import{bus as re}from"./bus-iS19lywR.js";const se=R({name:"QPageContainer",setup(e,{slots:u}){const{proxy:{$q:n}}=q(),t=j(k,L);if(t===L)return console.error("QPageContainer needs to be child of QLayout"),L;B(N,!0);const i=f(()=>{const a={};return t.header.space===!0&&(a.paddingTop=`${t.header.size}px`),t.right.space===!0&&(a[`padding${n.lang.rtl===!0?"Left":"Right"}`]=`${t.right.size}px`),t.footer.space===!0&&(a.paddingBottom=`${t.footer.size}px`),t.left.space===!0&&(a[`padding${n.lang.rtl===!0?"Right":"Left"}`]=`${t.left.size}px`),a});return()=>m("div",{class:"q-page-container",style:i.value},A(u.default))}}),{passive:O}=U,ce=["both","horizontal","vertical"],ue=R({name:"QScrollObserver",props:{axis:{type:String,validator:e=>ce.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:V},emits:["scroll"],setup(e,{emit:u}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let t=null,i,a;_(()=>e.scrollTarget,()=>{g(),w()});function l(){t?.();const p=Math.max(0,X(i)),b=Y(i),c={top:p-n.position.top,left:b-n.position.left};if(e.axis==="vertical"&&c.top===0||e.axis==="horizontal"&&c.left===0)return;const z=Math.abs(c.top)>=Math.abs(c.left)?c.top<0?"up":"down":c.left<0?"left":"right";n.position={top:p,left:b},n.directionChanged=n.direction!==z,n.delta=c,n.directionChanged===!0&&(n.direction=z,n.inflectionPoint=n.position),u("scroll",{...n})}function w(){i=K(a,e.scrollTarget),i.addEventListener("scroll",r,O),r(!0)}function g(){i!==void 0&&(i.removeEventListener("scroll",r,O),i=void 0)}function r(p){if(p===!0||e.debounce===0||e.debounce==="0")l();else if(t===null){const[b,c]=e.debounce?[setTimeout(l,e.debounce),clearTimeout]:[requestAnimationFrame(l),cancelAnimationFrame];t=()=>{c(b),t=null}}}const{proxy:S}=q();return _(()=>S.$q.lang.rtl,l),G(()=>{a=S.$el.parentNode,w()}),I(()=>{t?.(),g()}),Object.assign(S,{trigger:r,getPosition:()=>n}),J}}),de=R({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:u,emit:n}){const{proxy:{$q:t}}=q(),i=h(null),a=h(t.screen.height),l=h(e.container===!0?0:t.screen.width),w=h({position:0,direction:"down",inflectionPoint:0}),g=h(0),r=h(Z.value===!0?0:P()),S=f(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),p=f(()=>e.container===!1?{minHeight:t.screen.height+"px"}:null),b=f(()=>r.value!==0?{[t.lang.rtl===!0?"left":"right"]:`${r.value}px`}:null),c=f(()=>r.value!==0?{[t.lang.rtl===!0?"right":"left"]:0,[t.lang.rtl===!0?"left":"right"]:`-${r.value}px`,width:`calc(100% + ${r.value}px)`}:null);function z(o){if(e.container===!0||document.qScrollPrevented!==!0){const s={position:o.position.top,direction:o.direction,directionChanged:o.directionChanged,inflectionPoint:o.inflectionPoint.top,delta:o.delta.top};w.value=s,e.onScroll!==void 0&&n("scroll",s)}}function M(o){const{height:s,width:v}=o;let d=!1;a.value!==s&&(d=!0,a.value=s,e.onScrollHeight!==void 0&&n("scrollHeight",s),Q()),l.value!==v&&(d=!0,l.value=v),d===!0&&e.onResize!==void 0&&n("resize",o)}function W({height:o}){g.value!==o&&(g.value=o,Q())}function Q(){if(e.container===!0){const o=a.value>g.value?P():0;r.value!==o&&(r.value=o)}}let x=null;const H={instances:{},view:f(()=>e.view),isContainer:f(()=>e.container),rootRef:i,height:a,containerHeight:g,scrollbarWidth:r,totalWidth:f(()=>l.value+r.value),rows:f(()=>{const o=e.view.toLowerCase().split(" ");return{top:o[0].split(""),middle:o[1].split(""),bottom:o[2].split("")}}),header:C({size:0,offset:0,space:!1}),right:C({size:300,offset:0,space:!1}),footer:C({size:0,offset:0,space:!1}),left:C({size:300,offset:0,space:!1}),scroll:w,animate(){x!==null?clearTimeout(x):document.body.classList.add("q-body--layout-animate"),x=setTimeout(()=>{x=null,document.body.classList.remove("q-body--layout-animate")},155)},update(o,s,v){H[o][s]=v}};if(B(k,H),P()>0){let o=function(){d=null,$.classList.remove("hide-scrollbar")},s=function(){if(d===null){if($.scrollHeight>t.screen.height)return;$.classList.add("hide-scrollbar")}else clearTimeout(d);d=setTimeout(o,300)},v=function(F){d!==null&&F==="remove"&&(clearTimeout(d),o()),window[`${F}EventListener`]("resize",s)},d=null;const $=document.body;_(()=>e.container!==!0?"add":"remove",v),e.container!==!0&&v("add"),ee(()=>{v("remove")})}return()=>{const o=te(u.default,[m(ue,{onScroll:z}),m(E,{onResize:M})]),s=m("div",{class:S.value,style:p.value,ref:e.container===!0?void 0:i,tabindex:-1},o);return e.container===!0?m("div",{class:"q-layout-container overflow-hidden",ref:i},[m(E,{onResize:W}),m("div",{class:"absolute-full",style:b.value},[m("div",{class:"scroll",style:c.value},[s])])]):s}}}),ge=oe({__name:"MainLayout",setup(e){const{screen:u}=ae(),n=h(!1),t=h(!1);return re.on("drawer",(i,a)=>{const l=a==="left"?n:t;switch(i){case"open":l.value=!0;break;case"close":l.value=!1;break;case"toggle":l.value=!l.value;break}}),(i,a)=>{const l=ne("router-view");return ie(),le(de,{view:"hHh LpR lFf"},{default:D(()=>[y(l,{mobile:T(u).lt.md,name:"header"},null,8,["mobile"]),y(l,{mobile:T(u).lt.md,"model-value":n.value,name:"leftDrawer"},null,8,["mobile","model-value"]),y(se,{style:{height:"100vh"}},{default:D(()=>[y(l)]),_:1}),y(l,{mobile:T(u).lt.md,"model-value":t.value,name:"rightDrawer"},null,8,["mobile","model-value"]),y(l,{mobile:T(u).lt.md,name:"footer"},null,8,["mobile"])]),_:1})}}});export{ge as default};
